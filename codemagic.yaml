# Automatically generated on 2020-10-14 UTC from https://codemagic.io/app/5f85c2ce9ccdab7215d00938/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  dev:
    name: DEV
    max_build_duration: 30
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*DEV*'
          include: true
          source: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - cd codemagicpoc && flutter packages pub get
      - cd codemagicpoc && flutter build apk --debug
    artifacts:
      - codemagicpoc/build/**/outputs/**/*.apk
      - codemagicpoc/build/**/outputs/**/*.aab
      - codemagicpoc/build/**/outputs/**/mapping.txt
      - codemagicpoc/flutter_drive.log
    publishing:
      email:
        recipients:
          - william.dev.acc@gmail.com
      google_play:
        credentials: Encrypted(Z0FBQUFBQmZpSjIwNXM3UnoyazdFRU5KdkN0Sm9xa1FGdk0xSjRzazZrVDBRS1dQUEMydWQ0OFc5cTJMRnF0ZTNkRnMxcFlfMVdsMnpwMmZGeUZyT0drRUdEUDNuOFBpdWJqVmdTX09rbG9HY1FjSVI3U2FXUDF5enFLYzlYSUNMdWZIV1VDVVl2UlpVS0puTkJISlhTSlNMbGxoUzh1RE9rMF9pZENqcGRyY1dMZ0I5WkZyNDFEMXhKS1l0TEI1NHJUQjdoVncwRGVNMVJkUXNiVjVsRm9Pdi1HRlAtV212dGNRUkZxVjVVNnhnYjJHM2xHb2tKSHdwVGxtYUhIdDlFS256V0hHNUl4WEJ6b05PN0NFdXFTWkgwaEtGdHpIcWlZd3RVb2NnN0ZiZWlpMzFicXh2cTVmY3FYaG52bHBhWFBEVW9vNDNpYXl3UnhveF9wMVJvUXl2eFlSckhnRE1ob1ZrUHBvSGVMSEJPd084Y1NXSWxibnBqQkdFaFlXbzJzQnFYZmVQTDk0TnY2YlZaamJEd3BxZGtPSXFmOVpHWi1vc2doZVZJbmxNbmswMWNPRWVFSHpnVXRSWFhPQS1UZTkySXdKWnMzR3kta2xSVTdpY1FYYkZjYkkwOWh6aEphc2l3WHg2ZHFtTUIwQWNRb2daNHlIWlBRcnB3TzlobGZoRHdReHo4NXA4bXF1OWxDRThaUmI2M1FyNnc4UTVSNFZQandtRTJPSlM5UDNydFFqWUZ1dnE0OTEtalRTdmlSdUc5R2h3WnNUMXYxWjBDZDBXLU0yYjZwSlphVHdDNHlsYmhlZzl4VnBMbENSZnZtai0zVC1pNjB1RmhJQzVkb0Q3R292MVplQTJWaTc1Ylc3RFk1aldYMC1RdWlfQjhQMjMxTzdMWVJWcElKcDI3WnN3SERVNV83V0VsSkp3ckZQc2ZNUVVUc1ZNNmo4LU5HNjQtN3dSa2dvNXJHY0t6ODgzS3dESWF5ZXI5TVFQWkdFMkt4SjBzNGtPeS0xT3pNOThCV3dVUlhQaENrQWhSZFRDZUJWMzAyZ0VUOWhNYWs4dE9zMjY1blZtelVOV01CT2VTRkhLQVRiSVRxbVh2LVlNbnJ4UGtZb0NBVWQ1MC0wOGJpUVhkNjUyRURPZWI4SjdTTWRwTFZsTHBUTmJVZnM0Ukt6TXp0ZEI2aTNkTFpXTHI2a0xYUi1TRkdzYy10QVd4eXM5TjFKeDFCQzhtLWQ2QnZjcHJldkVHTFROMVlmd2xjOXEyNlZabFY5bm5mbDF0dG5lYWhReDIyMG1DbDF6UkwtVDdKQ2Vmd1NXSE1sZEVlNGs0SjVqbE1DYzdobFNGdzVXZHZtZS1hTnJqcWZONVVZMkZ0Vm8zcjhPUzVhWlllLTJBS25UdTdCbFV0d3luTXIxbnhxLURKeXl2dGEzX3ZZM3NRa0xKZExWVFppd3RBSUFLdXUydDVrRVhqdEs2X3Z0LWFNYnpHY1JSVGE4SWpiQUd3TXpuUWgtRVNXYlpBYU5iV2pCVWsxVXEzY1FId2NGTy1xZUU0SmJtSVVSQlNlQUJ5YUQ1OTNrUjVUZVprMFBMTWpUbDU3UWIxNU1fazEwYW1fVDFEUS1TMmNZb2U3dDhVYTk2X0UtaGZra1lPTHk5ZUZlNUFTdzVkZVNDRlJpYTEtLWU2X2phaXFqb0dCZDBvRlBIUy0wemxQWEpQa1NndE1tNGxuTVhCMjBhZldCdERHdTJOeUN6cHF6M3c2UVQwZjB3bUEzYU9zbE9TcnE2MUdzeF9JbXQ2RWYwYTZILUdQUHpZQm12X0ZhNXg5bjh2Y2tmZFhmdzlOUzcxbmlFTlo4QVpDM2EyTWNHeV8wTzZDcU5aWFFPYUV1WXp3eTRaZ3YxWWxmT25TMks5UHZhLUZSU0ZtM25lSF9uZTQwLU5uMU9pN1hTLWdSME9HTExVanktOWxTVnpWOW1takllRmZCNW1QRDJRa2N1V2dCb1NfNkJadjBkWnFHQ3dMcmV5azJRUnJXS1UydFJjQWlFb3I4b2gySWVLb1VuYUpzWE5meHVFczJwYVJrcnZIamIzSDF3d0dfZTU0Q3pfR1VNWF96T2R1TG1OYUVkOWhhUm0yRUJHT2VxemJxTUJVR2VOMWlHb3pBRWJBaERGTzR4Y2xkQWtpa1BMUFh2c1NZSERuTjZ1OWotamU4UWpvZ2pLSmhLUlJBaTZsQ3Bvc2N6SkE1YVFFbDJjUmFndnZQTU93U282NlJYZjNwazVKcG1WWUVCNVN3N2c3WlpxaUcyQkRYaGJielh0YWRweXhSME5KNUlkM0JxTFZCWWFadG1UTXZLNFp3M3dSaGllQVJPRHNkc0xnVGpKUmRLM0hpNTRwQUZZNUpPRkwzc2xHSDBpLTdSemhNT1ZBMFpqT19jeUtLczhDbmktcFYyR19hbF93d3RuSWpQSVNoRzk5Y0FvU1o5d1U3a2l4OFBCTFV6LVdVZk5JR1lhVTFRblloNnc1NHhNdWtzYUxfTmRQSkotdjVrU2xoeFNqb3FDVkxXcFFWZVFNZzRBcGpqQnZGbmd1NDRIdlRzUEQwSnRnNlhXQjI5UktCOHJQRklnOUlzR2lMSGVlZS1GcnpCVmxVaGNPSHJzVlpaa1hmd0dJWWZITkRVRzdoX3VseXVGWXJSY2VQWUphVC1ZM0NHTGJIQmF6eDJaeFZzN2d1NHNkRzd2WjMyZEFqVmx2dl9EaFBFRWd3YmxGU1pyUW93S2N5Y2lSQzJHbW5aTUppbzAwRUtzZnZwcEZrV050dWpvRjhPVlcxemY1Zm9tMUpKeWxfZ2ROU1dUZ28zMGdkdHJmZXpobHF4c21uU0FxcF9RNE5DYjJKbkl4YkVSdGRWakRCZFpQcjJQY1ZRX21fXzBDSG1GdXMyYTZ1dlFseHFjU01WeWstams1bHA2V3Y2amxXV0l3MlFLZWJha0JxcHlabjlMai00YTBqTGpXTWtqWVZwTUFYcV8xTkZKeW1xNTVPc29JcllmXzFfc2hsU2FHS1Q5eDhQYnZsQ0ZBSzBXQm1fcmRyaW5PUGY1d2ZIeFh2OFRwMElrcE1QZjJOQkdaUjBTUFE2c0xsUnB3N2VGLWRiRTloLVNzS014SGNmVXphcnhXb1U3M3U0Qk90aVhjaXdKZWtrY3JGNGtrWmhqdG9WUF9JcmJKakhMVVhHQmdYdjdMNlFVTzBOaDZMdXBweWtlTHlrNWlmNGFjQ1NaRW9DdHhUZjctbFBFZHY4dU8wbnBkRHpiLTZfaWNRVmZXd04xMVlWRU9ZRzE2cTZiWDFpcmlLM09WRWpIeVhsUDNzdUlUYVMyVDIxaEp1UDBaczBPa3BPc29fcEV5Z2xlZEM3WDk5d2pfcV9abEo1NXZMNzhjV0VUYTNJcmg3S2dtX1o1QTJ0UEwwSno0S0UwVTQtd1RkaVQwcHZsdWowWkdzcGdVVHRpS3kxb3VYUUVIcHV0WUlLb2QzdEdUdUdVRTN5SEhyS2hmOGR0Q19wMVVBRjFSVTRHV1h0TDVyXzB2TE9yRjhCQUtXb3ZnMXpvY0x0Sk9udkwtd2tmOWhOYkZXaldWcGhmZkVSQzFqYU5nLURJcEN2bXlGaUtsRFBtNjVMQmNBc2RCenBWRWtuRm5nUEhFMWNGZ19KYlpWNG5OMFY5Nzk4Y2hpczlNbWxiS3ZZUDBpbmNlckFMODFycWlJSVdZSFVkU3NyakwtU2NBY1RtRHlHRlpBWWx0S1NZaGlaM2VfSHpzak5HSGtiZXMtdWw0cHpaWERZQTRnNGdYMVRtLVIzNGtXV1VEOU9pLW03RWI3ajFzRnM2eDlvZk0zTkhMWFpBTGxmVjNyMmMzTWJhaEdxako1WjFkcXVGMEVLLWJKdEdsWVJ3bUUyeXNPS3FmU3RJVHEzWjJHTGtkUXdBZzhnbEl5a3c3SWtLZWV3ZWk4QUZRRmRUU2xNQTRyYjQ4dDB3ZXc3Y3R0ZWZJY1dZU3NjRG93T0N4LWxVTW1KNHVHV0JnMmJ1YU0yRGwzQTRYazRJWVB6ejdEbUlVUVJieC1wcVEzUU51WHNjdW9OaTg4WjFoRTdrNUZNWFBhNElWMmVncVRBeC1JSEZZS1A5ZWJjUEJUeC1KcWJFcktxWV9wc1Y1VGRnMG9seGx1bFEwYzRMTFl6OS1KREtYclMyTGFib1NUMkZSTVljZnV4TktzRTlaejdTNnhUYWc2NFNadFYxeVE5ZUtZMGREdzBSd0N1b0M4T2tkby1LcVJqajFtUE1ncEFUT3FnSGJmY1RJdTdsaEZKSjVVaWVKcDdpd0pJUmoxWGc3T0s1ZVhBQ3VQdzFVQi1IdjNCeElCYUY4)
        track: internal
  preprod:
    name: PREPROD
    max_build_duration: 30
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*PREPROD*'
          include: true
          source: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - cd codemagicpoc && flutter packages pub get
      - cd codemagicpoc && flutter build apk --debug --dart-define=project_env=preprod
      - find . -name "Podfile" -execdir pod install \;
      - cd codemagicpoc && flutter build ios --debug --no-codesign
    artifacts:
      - codemagicpoc/build/**/outputs/**/*.apk
      - codemagicpoc/build/**/outputs/**/*.aab
      - codemagicpoc/build/**/outputs/**/mapping.txt
      - codemagicpoc/build/ios/ipa/*.ipa
      - codemagicpoc/tmp/xcodebuild_logs/*.log
      - codemagicpoc/flutter_drive.log
    publishing:
      email:
        recipients:
          - william.dev.acc@gmail.com
  prod:
    name: PROD
    max_build_duration: 30
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*PROD*'
          include: true
          source: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - cd codemagicpoc && flutter packages pub get
      - cd codemagicpoc && flutter build apk --debug --dart-define=project_env=prod
    artifacts:
      - codemagicpoc/build/**/outputs/**/*.apk
      - codemagicpoc/build/**/outputs/**/*.aab
      - codemagicpoc/build/**/outputs/**/mapping.txt
      - codemagicpoc/flutter_drive.log
    publishing:
      email:
        recipients:
          - william.dev.acc@gmail.com
